---
sidebar_position: 3
---
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Как отправить письмо на разных языках

Отправить рассылку на разных языках можно с помощью персонализации писем — для этого нужно подготовить варианты на нужных языках и потом настроить отображение контента так, что русским подписчикам пришло письмо на русском, а остальным — на английском.

В этой статье мы расскажем только про настройку персонализации — процесс отправки писем мы подробно разбирали в другой статье.

[Как отправить массовую email-рассылку](/docs/email-campaigns/create-your-campaign/how-to-send-email-campaign.md) <br/>

Рассмотрим частый случай, когда рассылка ведётся на русском и английском языках (для других языков всё настраивается аналогично). Чтобы отправить письмо на разных языках, нужно знать язык каждого получателя. Предположим, что мы создали в дополнительной анкете поле **Language** (тип — свободный ввод), в котором у русских подписчиков хранится значение **ru**, а у остальных — **en**.

Стоит отметить, что у некоторых подписчиков язык может быть не указан или указан некорректно. Их тоже можно включить в рассылку — например, если у вас большая часть клиентов из России, можно отправить им рассылку на русском.

## Как настроить персонализацию
Персонализировать рассылку можно как в блочном редакторе, так и в HTML. Если рассылка создана в блочном редакторе, в отчёте по выпуску будет карта кликов по каждому варианту письма.

[Как персонализировать рассылку](./how-to-personalize-campaign.md)

<Tabs>
<TabItem value="key1" label="В блочном редакторе" default>

Письмо в блочном редакторе состоит из секций. У одной секции может быть несколько вариантов с разным содержанием — в этом случае для каждого варианта нужно указать поле анкеты и конкретное значение этого поля, которое должно быть у его получателя. <br/>

[Как создать письмо в блочном редакторе](../create-your-campaign/drag-and-drop-editor.md) <br/>

В нашем случае нужны три варианта для каждой секции:
<b> 1. Для русскоговорящих подписчиков </b>
<ol>
    <li>
        Отредактируйте содержимое секции на русском языке.
    </li>
    <li>
        Нажмите на секцию — в левой части экрана откроются настройки.
    </li>
    <li>
        Откройте вкладку «Персонализация», выберите поле <b>Language</b> и значение <b>ru</b>.
    </li>
    <li>
        Нажмите «Применить».
    </li>
</ol>
<b> 2. Для подписчиков, которые не указали язык или указали его некорректно </b>
<ol>
    <li>
        Нажмите на секцию — в левой части экрана откроются её настройки.
    </li>
    <li>
        Нажмите «Добавить вариант для получателей у которых не заполнено поле “language” или указаны другие значения».
    </li>
    <li>
        Саму секцию оставляем без изменений.
    </li>
</ol>
<b> 3. Для англоязычных подписчиков </b>
<ol>
    <li>
        Нажмите на секцию — в левой части экрана откроются её настройки.
    </li>
    <li>
        Нажмите «Добавить вариант секции». Впишите значение en и нажмите «Применить».
    </li>
    <li>
        Нажмите на секцию, чтобы перейти к настройке контента, и переведите содержимое на английский.
    </li>
</ol>

</TabItem>
<TabItem value="key2" label="В HTML-редакторе">
Создать несколько вариантов одного письма в HTML-редакторе можно с помощью условных выражений PROScript. Мы будем использовать конструкцию SWITCH/CASE.<br/>
<br/>
Условные выражения в PROScript (ссылка)<br/>
<br/>
Как персонализировать письмо в HTML-редакторе:
<ol>
    <li>
        Скопируйте код поля, где хранятся данные о языке подписчиков (в нашем случае это поле <b>Language</b>). Для этого нужно зайти в дополнительную анкету — код показывается справа от поля, выглядит он вот так:<br/>
        <code>
        [% anketa.custom.language %]
        </code>
    </li>
    <br/>
    <li>
        Создайте новое письмо, откройте редактор и удалите оттуда весь код. Затем вставьте конструкцию SWITCH/CASE и пропишите код письма для каждого значения поля <b>Language</b>:
    </li>
    <code>
        [% SWITCH anketa.custom.language %]<br/>
        [% CASE 'ru' %] HTML-код письма на русском языке полностью<br/>
        [% CASE 'en' %] HTML-код письма на английском языке полностью<br/>
        [% CASE DEFAULT %] HTML-код письма для тех, у кого язык не указан или указан некорректно<br/>
        [% END %]<br/>
    </code>
</ol>
</TabItem>
</Tabs>

## Как проверить, работает ли персонализация
Рекомендуем проверять перед выпуском, правильно ли вы настроили персонализацию. Это можно сделать в режиме предпросмотра — нажмите на иконки с изображением гаджетов в верхней части редактора. Слева можно выбрать режим предпросмотра «Посмотреть все настроенные варианты персонализации».

Перед выпуском рассылки рекомендуем отправлять себе несколько тестовых копий, чтобы проверять персонализацию и отображение письма почтовыми клиентами (каждый сервис делает это немного по-своему). Чтобы точно знать, как подписчики увидят вашу рассылку, заведите ящики на основных доменах (Яндекс, Mail, Gmail, Outlook). Также для нашего случая стоит выбрать три тестовых адреса и присвоить им разные значения в поле **Language**: одному — **ru**, второму — **en**, а у третьего оставьте поле незаполненным.

:::tip Важно
На бесплатных аккаунтах можно отправить только одну тестовую копию — на почту, на которую зарегистрирован аккаунт.
:::