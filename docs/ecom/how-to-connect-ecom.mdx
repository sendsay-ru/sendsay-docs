---
sidebar_position: 1
sidebar_label: 'Как подключить'
---

import howToConnectSite from '/img/ecom/how-to-connect-ecom/how-to-connect-the-site1.png';
import eventFilter from '/img/ecom/how-to-connect-ecom/event-filter.png';

# Модуль «Sendsay Продажи»: что это и как подключить

Модуль **«Sendsay Продажи»** — это решение для автоматизации онлайн-продаж. Модуль позволяет отслеживать поведение пользователей на сайте (события) и создавать сценарии, которые помогают вернуть подписчиков на сайт: Брошенную корзину, Брошенную категорию, Брошенный просмотр и другие.

Это решение подойдёт онлайн-магазинам для реализации любых товаров и услуг. Для отслеживания поведения и действий пользователей на сайте необходимо настроить передачу данных об их активностях.

## Возможности версий

Модуль «Sendsay Продажи» доступен в двух версиях: с полной и ограниченной функциональностью. Ниже представлена таблица — с её помощью вы сможете определить, какая версия модуля подойдёт для решения маркетинговых задач вашего бизнеса.

| Возможности | «Продажи Старт» | «Продажи» |
| --- | --- | --- |
| Подключение модуля | Без дополнительной платы на любом платном тарифе линеек Рассылки и Маркетинг | За дополнительную месячную плату на тарифах Маркетинг от М10 |
| Добавление каталога YML | + | + |
| Передача клиентских данных в Sendsay | Без ограничений | Без ограничений |
| Готовые сценарии | Брошенная корзина<br />(1 письмо в серии)<br />Брошенный просмотр<br />(1 письмо в серии)<br />Брошенная категория<br />(1 письмо в серии) | Брошенная корзина<br />(до 5 писем в серии)<br />Брошенный просмотр<br />(1 письмо в серии)<br />Брошенная категория<br />(1 письмо в серии) |
| Хранение и использование клиентских данных | За последние 48 часов | Без ограничений |
| Создание сегментов на основе клиентских данных | Создание сегментов на основе данных за последние 48 часов. Для условий недоступны события: Поиск, Добавление в избранное, Предварительный заказ, Товар появился, Изменение цены | Без ограничений |
| Статистика по заказам для сценария | Без ограничений | Без ограничений |
| Статистика по заказам в отчёте выпуска и в шаблоне | Без ограничений | Без ограничений |
| Блок товарных рекомендаций в письмах | Нет | Без ограничений |
| Статистика по заказам (количество и сумма) в сводной таблице рассылок | Нет | Без ограничений |

:::tip Важно

Если вы используете бесплатный тариф, для подключения версии модуля «Продажи Старт» необходимо перейти на любой платный тариф линеек «Рассылки» или «Маркетинг».

Полная версия модуля «Sendsay Продажи» доступна за дополнительную ежемесячную плату для тарифов продукта Маркетинг от 10 000 подписчиков. Если в вашей базе контактов меньше подписчиков, но вы хотите воспользоваться возможностями модуля, необходимо перейти на тариф М10. Чтобы приобрести модуль, напишите в техподдержку.

:::

## Как подключить сайт к модулю

**Сайт** — это ваш онлайн-магазин, где вы предлагаете товары или услуги. Чтобы настроить передачу данных о действиях клиентов на сайте в Sendsay, сперва нужно подключить сайт к модулю. Для этого:

### 1. Добавьте сайт в Sendsay

Перейдите в раздел **Продажи** в боковом меню и кликните по кнопке «Подключить сайт»:

![How to connect the site](/img/ecom/how-to-connect-ecom/how-to-connect-the-site.png)

В появившемся окне укажите адрес сайта и нажмите «Подключить»:

<p align="center">
  <img width="50%" src={howToConnectSite} alt="How to connect site" />
</p>

Далее переходите к настройке, нажав соответствующую кнопку.

### 2. Настройте передачу данных с сайта в Sendsay

На странице сайта выберите вкладку **Настройка**, скопируйте специальный код и отправьте его разработчикам:

![How to configure data transfer](/img/ecom/how-to-connect-ecom/how-to-configure-data-transfer.png)

Разработчикам необходимо установить код на все страницы сайта, с которых будут отслеживаться данные о действиях пользователей — требования указаны в [общих настройках](https://docs.sendsay.ru/ecom/how-to-connect-ecom#общие-настройки-для-сайта-магазина). Чтобы данные поступали в Sendsay, также нужно настроить функции передачи данных о действиях пользователей.

Для правильного отображения товаров в рассылках рекомендуем для всех событий передавать параметры:

- `"id"` — id товара. Желательно, чтобы id совпадал с тем, который есть в YML-файле каталога товаров.
- `"name"` — название товара.
- `"picture"` — ссылка на картинку. Проверьте, чтобы передавался абсолютный URL картинки.
- `"price"` — цена товара.
- `"url"` — ссылка на товар. Проверьте, чтобы передавался абсолютный URL.

### 3. Подключите каталог товаров

Каталог товаров необходим для запуска триггерного сценария Брошенная категория, а также если вы планируете размещать в своих рассылках актуальные товарные рекомендации — чтобы в письма подгружались товары из каталога.

[Как подключить каталог товаров](https://docs.sendsay.ru/ecom/product-catalog)

После подключения онлайн-магазина к модулю Продажи рекомендуем протестировать передачу данных, а уже после — настраивать триггерные сценарии и шаблоны.

## События сайта

События возникают в результате действий подписчиков на сайте онлайн-магазина: например, когда пользователи просматривали товары или категорию, добавляли товары в корзину и прочее. Их можно посмотреть во вкладке **Просмотр событий** на странице магазина.

:::tip Важно

Просмотр событий будет доступен после того, как данные начнут поступать в Sendsay. Поэтому в самом начале важно правильно настроить передачу данных.

:::

Какие события можно передавать с сайта в Sendsay:

- Регистрация на сайте,
- Авторизация на сайте,
- Просмотр товара,
- Просмотр категории,
- Обновление корзины,
- Очистка корзины,
- Поиск товара,
- Заказ оформлен,
- Изменение заказа,
- Подписка на изменение стоимости товара,
- Подписка на появление товара в продаже,
- Добавление товара в избранное,
- Предварительный заказ товара.

Если настроена передача событий **Регистрация на сайте** и **Авторизация на сайте**, в Sendsay будут передаваться email-адреса пользователей, которые зарегистрировались или авторизовались на сайте. Система сохранит такой адрес и свяжет с ним все поступающие события этого пользователя — таким образом анонимные контакты перестанут быть анонимными и станут участниками сценария.

Также во вкладке **Просмотр событий** отображаются стартовые события сценариев, которые сработали на стороне Sendsay:

- запуск события «Брошенная корзина» — когда пользователь положил товар в корзину и ушёл с сайта, не сделав заказ;
- запуск события «Брошенный просмотр» — если пользователь просматривал карточку товара, но не положил товар в корзину и не сделал заказ;
- запуск события «Брошенная категория» — в случае, когда пользователь просматривал категорию, но не перешёл в карточку товара и не сделал заказ.

По умолчанию триггерные события наступают через 30 минут после последнего действия пользователя на сайте. Время отправки писем по сценарию можно будет изменить в настройках сценария.

### События, завершающие сценарий

В ситуации, когда пользователь участвует в сценарии о брошенной корзине и решает оформить заказ, необходимо, чтобы сценарий для него завершился принудительно. Для этого важно настроить передачу событий, при наступлении которых сценарий завершится автоматически:

- **Заказ оформлен** и **Очистка корзины** для Брошенной корзины;
- **Заказ оформлен** и **Товар добавлен в корзину** для завершения сценариев Брошенный просмотр и Брошенная категория.

Сценарий автоматически завершится также при запуске других сценариев:

- Брошенный просмотр завершится для подписчиков, которые попали в сценарий **Брошенная корзина**,
- Брошенная категория завершится для тех участников, кто попадёт в сценарий **Брошенная корзина** или **Брошенный просмотр**.

## Как посмотреть историю событий сайта

В разделе **Продажи → Просмотр событий** в одной таблице собраны контакты, события на сайте и время, когда эти события произошли. Этот список можно отфильтровать по типу контакта, типу события и по периоду. Например, можно увидеть информацию о просмотренных товарах:

![Event view](/img/ecom/how-to-connect-ecom/event-view.png)

А если нужно узнать, кто из подписчиков оформлял заказы за последний месяц, будем действовать так:

<p align="center">
  <img width="70%" src={eventFilter} alt="How to connect site" />
</p>

В столбце **Контакт** выводится список пользователей:

- контакты из базы отображаются как email-адрес;
- анонимные пользователи — как набор латинских букв и цифр;
- несуществующие или удалённые из базы пользователи изображены в виде иконки привидения.

:::tip Важно

Адреса контактов могут повторяться, ведь один подписчик мог совершить несколько действий (событий) за указанный период.

:::

Над таблицей есть строка поиска — можно найти конкретного подписчика по его адресу.

Во вкладке **Просмотр событий** можно добавить в список или удалить конкретных подписчиков из базы. Для этого выберите нужные контакты, отметив их галочкой слева от адреса контакта. Затем:

- если хотите перенести контакты в список, нажмите «Добавить в список» и выберите список;
- если хотите удалить подписчиков, откройте выпадающий список у кнопки «Добавить в список» и выберите пункт **Удалить из базы**. ![How to delete contacts](/img/ecom/how-to-connect-ecom/how-to-delete-contacts.png)

## Общие настройки для сайта магазина

Для подсчета переходов по ссылкам из письма система использует перелинковку: все ссылки в письме «оборачиваются» в ссылки-редиректы, которые по умолчанию используют домен `link.sendsay.ru`. Если навести курсор на любую ссылку, в левом нижнем углу браузера появится подсказка — на какой адрес планируется переход. Каждая такая ссылка уникальна.

Когда подписчик кликает по ссылке, он переходит сначала на `link.sendsay.ru`, а затем — на исходную ссылку. Так система учитывает переход, и подписчик попадает на нужную страницу.

Для полноценной работы скрипт должен содержать информацию о том, для кого он отправляет событие в Sendsay — эта информация зашифрована в ссылке-редиректе. Для того, чтобы наш скрипт на сайте клиента имел доступ в к полному содержимому ссылки-редиректа, нужно соблюсти условия:

1. Сайт клиента должен открываться через https-протокол.
2. Ссылки для перелинковки должны быть не в домене `link.sendsay.ru`, а в сабдомене сайта, и тоже использовать SSL-сертификат. Это можно сделать двумя способами:

- Делегировать домен нам, прописав в `NS DNS` следующее:

```
IN NS gns194b.sendsay.ru.
IN NS gns194a.sendsay.ru.
IN NS gns195b.sendsay.ru.
IN NS gns195a.sendsay.ru.
```

- Настроить домен самостоятельно, указав в `CNAME`:

```
link.mail.CLIENT.TLD CNAME ACCOUNT.dlink.sendsay.ru
```

где link.mail.CLIENT.TLD - ваш домен для ссылок, ACCOUNT — ваш основной логин в Sendsay.

После настройки можно проверить домен по ссылке. Если всё настроено правильно, необходимо «повесить» на этот домен SSL-сертификат. Вы можете сделать это самостоятельно или запросить у нас бесплатный сертификат Let's Encrypt.

В случае, если ссылки-редиректы будут идти через `link.sendsay.ru`, то как минимум в Safari и на мобильных устройствах с iOS наш скрипт не будет получать информацию о подписчике.

**Читайте также:** [Руководство по триггерным сценариям для онлайн-продаж](https://docs.sendsay.ru/ecom/ecom-triggers)
